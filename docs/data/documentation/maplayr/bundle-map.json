{"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Bundle-Map"},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/maplayr\/bundle-map"]}],"metadata":{"title":"Bundle Your Map","modules":[{"name":"MapLayr"}],"role":"article","roleHeading":"Article"},"seeAlsoSections":[{"identifiers":["doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/API-Key","doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Display-Map"],"anchor":"Getting-Started","generated":true,"title":"Getting Started"}],"kind":"article","schemaVersion":{"minor":3,"patch":0,"major":0},"hierarchy":{"paths":[["doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr"]]},"primaryContentSections":[{"kind":"content","content":[{"type":"heading","text":"Overview","level":2,"anchor":"Overview"},{"type":"paragraph","inlineContent":[{"text":"If connectivity at your venue is unreliable, you can include the latest version of your map inside your application bundle. This also allows you to confidently use the synchronous ","type":"text"},{"isActive":true,"identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Map\/managed(id:)-5kxdb","type":"reference"},{"text":" method to load a map without having to design your application around asynchronous map loading.","type":"text"}]},{"type":"heading","text":"Setting Up the Map Bundle Directory","level":2,"anchor":"Setting-Up-the-Map-Bundle-Directory"},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In Xcode, create a folder reference named “AppLayr” in the top-level directory of your application."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Inside that folder, create another folder named “Maps”."}]}]}]},{"type":"heading","text":"Using the Download Script","level":2,"anchor":"Using-the-Download-Script"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"code":"download-map","type":"codeVoice"},{"type":"text","text":" script included with MapLayr helps you manage map bundles. The script accepts these parameters:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"code":"-m","type":"codeVoice"},{"text":" or ","type":"text"},{"code":"--map","type":"codeVoice"},{"text":": The ID of the map to download","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"-d"},{"type":"text","text":" or "},{"type":"codeVoice","code":"--dir"},{"type":"text","text":": The target directory for the map bundle (typically your Maps folder)"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"-n"},{"type":"text","text":" or "},{"type":"codeVoice","code":"--name"},{"type":"text","text":": (Optional) A custom name for the map bundle"}]}]},{"content":[{"inlineContent":[{"code":"--skip-if-exists","type":"codeVoice"},{"type":"text","text":": Skip download if the map already exists"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"code":"--skip-if-debug","type":"codeVoice"},{"text":": Skip download if ","type":"text"},{"code":"CONFIGURATION","type":"codeVoice"},{"text":" is set to ","type":"text"},{"type":"codeVoice","code":"Debug"}],"type":"paragraph"}]}]},{"type":"heading","text":"Automating Map Updates","level":2,"anchor":"Automating-Map-Updates"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To keep your bundled map up to date, add a build phase in Xcode:"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Add a new ","type":"text"},{"type":"emphasis","inlineContent":[{"type":"text","text":"Run Script"}]},{"text":" phase in your target’s ","type":"text"},{"type":"emphasis","inlineContent":[{"type":"text","text":"Build Phases"}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Position it before the "},{"type":"emphasis","inlineContent":[{"text":"Copy Bundle Resources","type":"text"}]},{"type":"text","text":" phase"}]}]},{"content":[{"inlineContent":[{"text":"Name it something descriptive like “Update Map”","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Uncheck “based on dependency analysis”","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Add the script, replacing the map ID and directory path as needed:"}],"type":"paragraph"}]}]},{"type":"codeListing","code":["\"${BUILD_DIR%Build\/*}SourcePackages\/checkouts\/maps-ios\/download-map\" -m \"YOUR-MAP-ID\" -d \"$PROJECT_DIR\/My App\/AppLayr\/Maps\" --skip-if-debug"],"syntax":"shell"},{"name":"Note","type":"aside","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"For more reliability, consider copying the "},{"type":"codeVoice","code":"download-map"},{"type":"text","text":" script into your project instead of referencing it from the package directory."}]}],"style":"note"},{"level":2,"anchor":"Best-Practices","type":"heading","text":"Best Practices"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Add your Maps folder to "},{"code":".gitignore","type":"codeVoice"},{"type":"text","text":" to avoid committing map bundles to source control"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Use "},{"type":"codeVoice","code":"--skip-if-debug"},{"type":"text","text":" to speed up debug builds"}],"type":"paragraph"}]}]}]}],"sections":[],"abstract":[{"type":"text","text":"Have your map available immediately when your app launches for the first time."}],"references":{"doc://com.applayr.MapLayr/documentation/MapLayr/API-Key":{"role":"article","kind":"article","identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/API-Key","abstract":[{"type":"text","text":"Obtain an API key and configure your app to use it."}],"url":"\/documentation\/maplayr\/api-key","type":"topic","title":"API Key"},"doc://com.applayr.MapLayr/documentation/MapLayr":{"type":"topic","identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr","abstract":[{"type":"text","text":"High performance map view for venue-specific maps."}],"title":"MapLayr","role":"collection","kind":"symbol","url":"\/documentation\/maplayr"},"doc://com.applayr.MapLayr/documentation/MapLayr/Map":{"kind":"symbol","identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Map","url":"\/documentation\/maplayr\/map","type":"topic","role":"symbol","navigatorTitle":[{"text":"Map","kind":"identifier"}],"fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Map","kind":"identifier"}],"abstract":[{"text":"The properties of a map.","type":"text"}],"title":"Map"},"doc://com.applayr.MapLayr/documentation/MapLayr/Display-Map":{"type":"topic","url":"\/documentation\/maplayr\/display-map","title":"Displaying a Map","identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Display-Map","abstract":[{"type":"text","text":"Create a "},{"type":"reference","identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Map","isActive":true},{"type":"text","text":" and assign it to a "},{"type":"reference","identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/MapView","isActive":true},{"type":"text","text":"."}],"role":"article","kind":"article"},"doc://com.applayr.MapLayr/documentation/MapLayr/MapView":{"fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"MapView","kind":"identifier"}],"title":"MapView","abstract":[{"type":"text","text":"A view which displays interactive map content."}],"type":"topic","identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/MapView","kind":"symbol","role":"symbol","navigatorTitle":[{"text":"MapView","kind":"identifier"}],"url":"\/documentation\/maplayr\/mapview"},"doc://com.applayr.MapLayr/documentation/MapLayr/Map/managed(id:)-5kxdb":{"url":"\/documentation\/maplayr\/map\/managed(id:)-5kxdb","title":"managed(id:)","type":"topic","kind":"symbol","role":"symbol","abstract":[{"type":"text","text":"Returns a managed map with the given map ID."}],"identifier":"doc:\/\/com.applayr.MapLayr\/documentation\/MapLayr\/Map\/managed(id:)-5kxdb","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"managed","kind":"identifier"},{"text":"(","kind":"text"},{"text":"id","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:15MapLayrInternal0A0C","text":"Map"}]}}}